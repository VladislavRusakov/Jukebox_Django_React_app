{"ast":null,"code":"import React from'react';import YouTube from'react-youtube';import{jsx as _jsx}from\"react/jsx-runtime\";function Player(_ref){let{mainData,onPlayerReadyRef,setVolume,setIsPlaying,setCurrentTime,setDuration}=_ref;// Changes: Added setCurrentTime and setDuration as props\nconst playerRef=React.useRef(null);const intervalRef=React.useRef(null);const[videoId,setVideoId]=React.useState('');React.useEffect(()=>{const playedRecord=mainData.find(record=>record.isPlayed);if(playedRecord){const videoUrl=playedRecord.youtubeUrl;const regex=/(?:https?:\\/\\/)?(?:www\\.)?(?:youtube\\.com\\/watch\\?v=|youtu\\.be\\/)([^&]+)/;const match=videoUrl.match(regex);const newVideoId=match?match[1]:null;setVideoId(newVideoId);}},[mainData]);React.useEffect(()=>{return()=>{if(intervalRef.current){clearInterval(intervalRef.current);}};},[]);const opts={height:'200',width:'350',playerVars:{autoplay:1}};function onPlayerReady(event){playerRef.current=event.target;if(onPlayerReadyRef){onPlayerReadyRef.current=event.target;}setVolume(event.target.getVolume());// Changes\nsetIsPlaying(event.target.getPlayerState()===1);// Changes: 1 is the state code for playing\nsetDuration(event.target.getDuration());// Changes: Set video duration\nif(intervalRef.current){clearInterval(intervalRef.current);}intervalRef.current=setInterval(()=>{setCurrentTime(event.target.getCurrentTime());},1000);}function onPlayerStateChange(event){console.log('Player state change',event.data);setIsPlaying(event.data===1);// Changes: 1 is the state code for playing\n}return/*#__PURE__*/_jsx(\"div\",{className:\"youtube--player--container\",id:\"player\",children:videoId&&/*#__PURE__*/_jsx(YouTube,{videoId:videoId,opts:opts,onReady:onPlayerReady,onStateChange:onPlayerStateChange})});}export default Player;","map":{"version":3,"names":["React","YouTube","jsx","_jsx","Player","_ref","mainData","onPlayerReadyRef","setVolume","setIsPlaying","setCurrentTime","setDuration","playerRef","useRef","intervalRef","videoId","setVideoId","useState","useEffect","playedRecord","find","record","isPlayed","videoUrl","youtubeUrl","regex","match","newVideoId","current","clearInterval","opts","height","width","playerVars","autoplay","onPlayerReady","event","target","getVolume","getPlayerState","getDuration","setInterval","getCurrentTime","onPlayerStateChange","console","log","data","className","id","children","onReady","onStateChange"],"sources":["E:/work/Jukebox/local_react_frontend/src/components/Player.js"],"sourcesContent":["import React from 'react';\r\nimport YouTube from 'react-youtube';\r\n\r\nfunction Player({ mainData, onPlayerReadyRef, setVolume, setIsPlaying, setCurrentTime, setDuration }) { // Changes: Added setCurrentTime and setDuration as props\r\n    const playerRef = React.useRef(null);\r\n    const intervalRef = React.useRef(null);\r\n    const [videoId, setVideoId] = React.useState('');\r\n\r\n    React.useEffect(() => {\r\n        const playedRecord = mainData.find(record => record.isPlayed);\r\n        if (playedRecord) {\r\n            const videoUrl = playedRecord.youtubeUrl;\r\n            const regex = /(?:https?:\\/\\/)?(?:www\\.)?(?:youtube\\.com\\/watch\\?v=|youtu\\.be\\/)([^&]+)/;\r\n            const match = videoUrl.match(regex);\r\n            const newVideoId = match ? match[1] : null;\r\n            setVideoId(newVideoId);\r\n        }\r\n    }, [mainData]);\r\n\r\n    React.useEffect(() => {\r\n        return () => {\r\n            if (intervalRef.current) {\r\n                clearInterval(intervalRef.current);\r\n            }\r\n        };\r\n    }, []);\r\n\r\n    const opts = {\r\n        height: '200',\r\n        width: '350',\r\n        playerVars: {\r\n            autoplay: 1,\r\n        },\r\n    };\r\n\r\n    function onPlayerReady(event) {\r\n        playerRef.current = event.target;\r\n        if (onPlayerReadyRef) {\r\n            onPlayerReadyRef.current = event.target;\r\n        }\r\n        setVolume(event.target.getVolume()); // Changes\r\n        setIsPlaying(event.target.getPlayerState() === 1); // Changes: 1 is the state code for playing\r\n        setDuration(event.target.getDuration()); // Changes: Set video duration\r\n\r\n        if (intervalRef.current) {\r\n            clearInterval(intervalRef.current);\r\n        }\r\n\r\n        intervalRef.current = setInterval(() => {\r\n            setCurrentTime(event.target.getCurrentTime());\r\n        }, 1000);\r\n    }\r\n\r\n    function onPlayerStateChange(event) {\r\n        console.log('Player state change', event.data);\r\n        setIsPlaying(event.data === 1); // Changes: 1 is the state code for playing\r\n    }\r\n\r\n    return (\r\n        <div className=\"youtube--player--container\" id=\"player\">\r\n            {videoId && (\r\n                <YouTube\r\n                    videoId={videoId}\r\n                    opts={opts}\r\n                    onReady={onPlayerReady}\r\n                    onStateChange={onPlayerStateChange}\r\n                />\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Player;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}