{"ast":null,"code":"import React from'react';import Shelf from'./components/Shelf';import Filter from'./components/Filter';import Jukebox from'./components/Jukebox';import Player from'./components/Player';import SocialFooter from'./components/SocialFooter';import'./index.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[nowPlaying,setNowPlaying]=React.useState([]);const inputRef=React.useRef(null);React.useEffect(()=>{fetch('http://localhost:8000').then(response=>{if(!response.ok){throw new Error('Network response was not ok');}return response.json();}).then(data=>{setNowPlaying(data);}).catch(error=>{console.error('There was a problem with the fetch operation:',error);});},[]);React.useEffect(()=>{const handleClick=()=>{if(inputRef.current){inputRef.current.focus();}};document.addEventListener('click',handleClick);return()=>{document.removeEventListener('click',handleClick);};},[]);function handleClick(id){setNowPlaying(prevNowPlaying=>{return prevNowPlaying.map(Record=>{return Record.id===id?{...Record,isPlayed:true}:{...Record,isPlayed:false};});});}function handleSearchChange(searchString){setNowPlaying(prevNowPlaying=>{if(!searchString){return prevNowPlaying.slice().sort((a,b)=>a.id-b.id);}else{return prevNowPlaying.slice().sort((a,b)=>{const aIncludes=a.artist.toLowerCase().includes(searchString.toLowerCase());const bIncludes=b.artist.toLowerCase().includes(searchString.toLowerCase());if(aIncludes&&!bIncludes)return-1;if(!aIncludes&&bIncludes)return 1;return 0;});}});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Shelf,{data:nowPlaying,handleClick:handleClick}),/*#__PURE__*/_jsx(Filter,{data:nowPlaying,onSearchChange:handleSearchChange,inputRef:inputRef}),/*#__PURE__*/_jsx(Jukebox,{state:nowPlaying}),/*#__PURE__*/_jsx(Player,{state:nowPlaying}),/*#__PURE__*/_jsx(SocialFooter,{})]});}export default App;","map":{"version":3,"names":["React","Shelf","Filter","Jukebox","Player","SocialFooter","jsx","_jsx","jsxs","_jsxs","App","nowPlaying","setNowPlaying","useState","inputRef","useRef","useEffect","fetch","then","response","ok","Error","json","data","catch","error","console","handleClick","current","focus","document","addEventListener","removeEventListener","id","prevNowPlaying","map","Record","isPlayed","handleSearchChange","searchString","slice","sort","a","b","aIncludes","artist","toLowerCase","includes","bIncludes","children","onSearchChange","state"],"sources":["E:/work/Jukebox/local_react_frontend/src/App.js"],"sourcesContent":["import React from 'react';\n\nimport Shelf from './components/Shelf'\nimport Filter from './components/Filter'\nimport Jukebox from './components/Jukebox'\nimport Player from './components/Player'\nimport SocialFooter from './components/SocialFooter'\n\nimport './index.css';\n\n\nfunction App() {  \n  const [nowPlaying, setNowPlaying] = React.useState([])\n  const inputRef = React.useRef(null);\n\n  React.useEffect(() => {\n      fetch('http://localhost:8000')\n          .then(response => {\n              if (!response.ok) {\n                  throw new Error('Network response was not ok');\n              }\n              return response.json();\n          })\n          .then(data => {\n              setNowPlaying(data);\n          })\n          .catch(error => {\n              console.error('There was a problem with the fetch operation:', error);\n          });\n  }, []);\n\n  React.useEffect(() => {\n      const handleClick = () => {\n          if (inputRef.current) {\n              inputRef.current.focus();\n          }\n      };\n      \n      document.addEventListener('click', handleClick);\n\n      return () => {\n          document.removeEventListener('click', handleClick);\n      };\n  }, []);\n\n  function handleClick(id) {\n      setNowPlaying(prevNowPlaying => {\n          return prevNowPlaying.map((Record) => {\n              return Record.id === id ? {...Record, isPlayed: true}: {...Record, isPlayed: false}\n          })\n      })\n  }\n\n  function handleSearchChange(searchString) {\n      setNowPlaying(prevNowPlaying => {\n          if (!searchString) {\n              return prevNowPlaying.slice().sort((a, b) => a.id - b.id);\n          } else {\n              return prevNowPlaying.slice().sort((a, b) => {\n                  const aIncludes = a.artist.toLowerCase().includes(searchString.toLowerCase());\n                  const bIncludes = b.artist.toLowerCase().includes(searchString.toLowerCase());\n\n                  if (aIncludes && !bIncludes) return -1;\n                  if (!aIncludes && bIncludes) return 1;\n                  return 0;\n              });\n          }\n      });\n  }\n\n  return (\n      <div>\n          <Shelf data={nowPlaying} handleClick={handleClick}/>\n          <Filter \n              data={nowPlaying} \n              onSearchChange={handleSearchChange}\n              inputRef={inputRef} \n          />\n          <Jukebox state={nowPlaying}/>\n          <Player state={nowPlaying}/>\n          <SocialFooter />\n      </div>\n  )\n}\n\nexport default App;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CAEzB,MAAO,CAAAC,KAAK,KAAM,oBAAoB,CACtC,MAAO,CAAAC,MAAM,KAAM,qBAAqB,CACxC,MAAO,CAAAC,OAAO,KAAM,sBAAsB,CAC1C,MAAO,CAAAC,MAAM,KAAM,qBAAqB,CACxC,MAAO,CAAAC,YAAY,KAAM,2BAA2B,CAEpD,MAAO,aAAa,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAGrB,QAAS,CAAAC,GAAGA,CAAA,CAAG,CACb,KAAM,CAACC,UAAU,CAAEC,aAAa,CAAC,CAAGZ,KAAK,CAACa,QAAQ,CAAC,EAAE,CAAC,CACtD,KAAM,CAAAC,QAAQ,CAAGd,KAAK,CAACe,MAAM,CAAC,IAAI,CAAC,CAEnCf,KAAK,CAACgB,SAAS,CAAC,IAAM,CAClBC,KAAK,CAAC,uBAAuB,CAAC,CACzBC,IAAI,CAACC,QAAQ,EAAI,CACd,GAAI,CAACA,QAAQ,CAACC,EAAE,CAAE,CACd,KAAM,IAAI,CAAAC,KAAK,CAAC,6BAA6B,CAAC,CAClD,CACA,MAAO,CAAAF,QAAQ,CAACG,IAAI,CAAC,CAAC,CAC1B,CAAC,CAAC,CACDJ,IAAI,CAACK,IAAI,EAAI,CACVX,aAAa,CAACW,IAAI,CAAC,CACvB,CAAC,CAAC,CACDC,KAAK,CAACC,KAAK,EAAI,CACZC,OAAO,CAACD,KAAK,CAAC,+CAA+C,CAAEA,KAAK,CAAC,CACzE,CAAC,CAAC,CACV,CAAC,CAAE,EAAE,CAAC,CAENzB,KAAK,CAACgB,SAAS,CAAC,IAAM,CAClB,KAAM,CAAAW,WAAW,CAAGA,CAAA,GAAM,CACtB,GAAIb,QAAQ,CAACc,OAAO,CAAE,CAClBd,QAAQ,CAACc,OAAO,CAACC,KAAK,CAAC,CAAC,CAC5B,CACJ,CAAC,CAEDC,QAAQ,CAACC,gBAAgB,CAAC,OAAO,CAAEJ,WAAW,CAAC,CAE/C,MAAO,IAAM,CACTG,QAAQ,CAACE,mBAAmB,CAAC,OAAO,CAAEL,WAAW,CAAC,CACtD,CAAC,CACL,CAAC,CAAE,EAAE,CAAC,CAEN,QAAS,CAAAA,WAAWA,CAACM,EAAE,CAAE,CACrBrB,aAAa,CAACsB,cAAc,EAAI,CAC5B,MAAO,CAAAA,cAAc,CAACC,GAAG,CAAEC,MAAM,EAAK,CAClC,MAAO,CAAAA,MAAM,CAACH,EAAE,GAAKA,EAAE,CAAG,CAAC,GAAGG,MAAM,CAAEC,QAAQ,CAAE,IAAI,CAAC,CAAE,CAAC,GAAGD,MAAM,CAAEC,QAAQ,CAAE,KAAK,CAAC,CACvF,CAAC,CAAC,CACN,CAAC,CAAC,CACN,CAEA,QAAS,CAAAC,kBAAkBA,CAACC,YAAY,CAAE,CACtC3B,aAAa,CAACsB,cAAc,EAAI,CAC5B,GAAI,CAACK,YAAY,CAAE,CACf,MAAO,CAAAL,cAAc,CAACM,KAAK,CAAC,CAAC,CAACC,IAAI,CAAC,CAACC,CAAC,CAAEC,CAAC,GAAKD,CAAC,CAACT,EAAE,CAAGU,CAAC,CAACV,EAAE,CAAC,CAC7D,CAAC,IAAM,CACH,MAAO,CAAAC,cAAc,CAACM,KAAK,CAAC,CAAC,CAACC,IAAI,CAAC,CAACC,CAAC,CAAEC,CAAC,GAAK,CACzC,KAAM,CAAAC,SAAS,CAAGF,CAAC,CAACG,MAAM,CAACC,WAAW,CAAC,CAAC,CAACC,QAAQ,CAACR,YAAY,CAACO,WAAW,CAAC,CAAC,CAAC,CAC7E,KAAM,CAAAE,SAAS,CAAGL,CAAC,CAACE,MAAM,CAACC,WAAW,CAAC,CAAC,CAACC,QAAQ,CAACR,YAAY,CAACO,WAAW,CAAC,CAAC,CAAC,CAE7E,GAAIF,SAAS,EAAI,CAACI,SAAS,CAAE,MAAO,CAAC,CAAC,CACtC,GAAI,CAACJ,SAAS,EAAII,SAAS,CAAE,MAAO,EAAC,CACrC,MAAO,EAAC,CACZ,CAAC,CAAC,CACN,CACJ,CAAC,CAAC,CACN,CAEA,mBACIvC,KAAA,QAAAwC,QAAA,eACI1C,IAAA,CAACN,KAAK,EAACsB,IAAI,CAAEZ,UAAW,CAACgB,WAAW,CAAEA,WAAY,CAAC,CAAC,cACpDpB,IAAA,CAACL,MAAM,EACHqB,IAAI,CAAEZ,UAAW,CACjBuC,cAAc,CAAEZ,kBAAmB,CACnCxB,QAAQ,CAAEA,QAAS,CACtB,CAAC,cACFP,IAAA,CAACJ,OAAO,EAACgD,KAAK,CAAExC,UAAW,CAAC,CAAC,cAC7BJ,IAAA,CAACH,MAAM,EAAC+C,KAAK,CAAExC,UAAW,CAAC,CAAC,cAC5BJ,IAAA,CAACF,YAAY,GAAE,CAAC,EACf,CAAC,CAEZ,CAEA,cAAe,CAAAK,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}